(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.domReady;var n=e.n(t);const{INITIAL_STEP:s,NONCE:o}=window.tastyRecipesOnboardingWizardVars,a="tasty-recipes-onboarding",c="hidden",r="tasty-recipes-current",i={INITIAL:s,SUCCESS:"success"},{getElements:l,addElements:d}=function(e={}){if("object"!=typeof e||null===e)throw new Error("createPageElements: initialElements must be a non-null object");let t=e;return{getElements:function(){return t},addElements:function(e){if("object"!=typeof e||null===e)throw new Error("addElements: newElements must be a non-null object");t={...t,...e}}}}({onboardingWizardPage:document.getElementById(`${a}-wizard-page`),container:document.getElementById(`${a}-container`),rootline:document.getElementById(`${a}-rootline`),steps:document.querySelectorAll(`.${a}-step`),skipStepButtons:document.querySelectorAll(`.${a}-skip-step`),consentTrackingButton:document.getElementById(`${a}-consent-tracking`),collapsible:document.querySelector(".tasty-recipes-collapsible")}),p=new URL(window.location.href),u=p.searchParams,m=e=>u.get(e),g=e=>(u.delete(e),p.search=u.toString(),p.toString()),y=(e,t="pushState")=>{const n=document.querySelector(`.${a}-step[data-step-name="${e}"]`);if(!n)return;const s=document.querySelector(`.${a}-step.${r}`);var o;s&&(s.classList.remove(r),o=s,o?.classList.add(c),s.classList.remove("tasty-recipes-fadein-up")),n.classList.add(r),(e=>{e?.classList.remove(c)})(n),n.classList.add("tasty-recipes-fadein-up");const{onboardingWizardPage:d}=l();d.setAttribute("data-current-step",e),((e,t,n="pushState")=>{if(u.set(e,t),p.search=u.toString(),["pushState","replaceState"].includes(n)){const s={[e]:t};window.history[n](s,"",p)}p.toString()})("step",e,t),function(e){const{rootline:t}=l(),n=t.querySelector(`.tasty-recipes-onboarding-rootline-item[data-step="${e}"]`);t.querySelectorAll(".tasty-recipes-onboarding-rootline-item").forEach(e=>{e.classList.remove(S),e.classList.remove(r)});let s=n.previousElementSibling;if(s)for(;s;)s.classList.add(S),s=s.previousElementSibling;e===i.SUCCESS?n.classList.add(S):n.classList.add(r)}(e)},f=()=>{const e=document.querySelector(`.${a}-step.${r}`),t=e?.nextElementSibling;t&&y(t.dataset.stepName)};const S="tasty-recipes-completed-step",E=e=>{e.preventDefault();const t=e.currentTarget;t.classList.toggle("tasty-recipes-open");const n=t.nextElementSibling;n.classList.toggle(c),n.classList.toggle("tasty-recipes-fadein-down")},b=async e=>{e.preventDefault();const t=new FormData;let n;t.append("action","tasty_recipes_onboarding_consent_tracking"),t.append("nonce",o);try{const e=await fetch(ajaxurl,{method:"POST",body:t});n=await e.json()}catch(e){console.error("Error:",e)}n.success?f():console.error(n||"Request failed")};window.addEventListener("popstate",e=>{const t=e.state?.step||m("step");y(t,"replaceState")});const L=function(){!function(){const e=m("step")||i.INITIAL;g("key"),g("success"),y(e,"replaceState")}(),function(){const{onboardingWizardPage:e,container:t}=l();e.classList.remove("tasty-recipes-hide-js"),t.classList.toggle("tasty-recipes-fadein-up")}(),function(){const{skipStepButtons:e}=l();e.forEach(e=>{e.addEventListener("click",f)})}(),function(){const{collapsible:e}=l();e.addEventListener("click",E)}(),function(){const{consentTrackingButton:e}=l();e.addEventListener("click",b)}()};n()(()=>{L()})})();
(()=>{var e={942:(e,t)=>{var i;!function(){"use strict";var a={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=l(e,n(i)))}return e}function n(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var i in e)a.call(e,i)&&e[i]&&(t=l(t,i));return t}function l(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(i=function(){return s}.apply(t,[]))||(e.exports=i)}()}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,a=window.wp.hooks,s=window.ReactJSXRuntime,n=({heading:i,group:n="",fields:l,initialFieldValues:r,showLabels:o=!0,onFieldChange:d=()=>{},renderBeforeFields:c,className:p="",recipe:u})=>{const[m,h]=(0,e.useState)(r),[_,g]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(m.additional_time_label||m.additional_time_value)&&g(!0)},[m.additional_time_label,m.additional_time_value]),(0,e.useEffect)(()=>{_||h(e=>({...e,additional_time_label:"",additional_time_value:""}))},[_]);const x=(e,t)=>{h(i=>({...i,[e]:t})),d(e,t)},y=(0,a.applyFilters)("tasty_recipes_before_setting_hook",()=>{},n,u,l,m),f=_?(0,t.__)("- Time","tasty-recipes-lite"):(0,t.__)("+ Time","tasty-recipes-lite");return"nutrition"===n&&r?.nutrifox_id?.length>1?(0,s.jsxs)(s.Fragment,{children:[y,(0,s.jsxs)("div",{className:p,children:[i&&(0,s.jsx)("h3",{children:i}),c&&c({fieldValues:m})]})]}):(0,s.jsxs)(s.Fragment,{children:[y,(0,s.jsxs)("div",{className:p,children:[i&&(0,s.jsx)("h3",{children:i}),c&&c({fieldValues:m}),(0,s.jsx)("div",{className:"tasty-recipes-fields-container",children:Object.entries(l).map(([e,i])=>(e=>!(e.is_pro||"nutrition"===n&&e.nutrifox_id))(i)&&((e,i)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("fieldset",{className:`tasty-recipes-recipe-${e}-container`,children:[o&&(0,s.jsxs)("label",{htmlFor:`tasty-recipes-recipe-${e}`,children:[i.label,i.tooltip&&(0,s.jsx)("span",{className:"tasty-tooltip-icon","data-tasty-tooltip":i.tooltip}),"prep_time"===e&&(0,s.jsx)("button",{className:"tasty-recipes-add-additional-time",type:"button",onClick:e=>{e.preventDefault(),g(!_)},title:f,children:f})]}),i.options?(0,s.jsx)("select",{id:`tasty-recipes-recipe-${e}`,name:e,value:m[i.object_key||e]||"",className:"inline-field",onChange:t=>x(i.object_key||e,t.target.value),children:Object.entries(i.options).map(([e,t])=>(0,s.jsx)("option",{value:e,children:t},e))}):(0,s.jsx)("input",{id:`tasty-recipes-recipe-${e}`,type:"text",placeholder:i.placeholder,name:e,className:"inline-field",value:m[i.object_key||e]||"",onChange:t=>x(i.object_key||e,t.target.value)}),"prep_time"===e&&!_&&(0,s.jsxs)("span",{style:{display:"none"},children:[(0,s.jsx)("input",{id:"tasty-recipes-recipe-additional-time-label",type:"hidden",name:"additional_time_label"}),(0,s.jsx)("input",{id:"tasty-recipes-recipe-additional-time-value",type:"hidden",name:"additional_time_value"})]})]},e),"prep_time"===e&&_&&(0,s.jsxs)("fieldset",{className:"tasty-recipes-additional-time-container",children:[(0,s.jsx)("input",{id:"tasty-recipes-recipe-additional-time-label",type:"text",name:"additional_time_label",placeholder:(0,t.__)("Additional Time Label","tasty-recipes-lite"),value:m.additional_time_label||"",onChange:e=>x("additional_time_label",e.target.value)}),(0,s.jsx)("input",{id:"tasty-recipes-recipe-additional-time-value",type:"text",name:"additional_time_value",placeholder:(0,t.__)("Additional Time Value","tasty-recipes-lite"),value:m.additional_time_value||"",onChange:e=>x("additional_time_value",e.target.value)})]})]}))(e,i))})]})]})},l=({initialValue:i,name:a,label:n,initialVideoSettingsValue:l,onChange:r=()=>{}})=>{const[o,d]=(0,e.useState)(i),[c,p]=(0,e.useState)(l?l.split(" "):[]),u={settings:{autoplay:(0,t.__)("Autoplay","tasty-recipes-lite"),mute:(0,t.__)("Mute","tasty-recipes-lite"),loop:(0,t.__)("Loop","tasty-recipes-lite"),"hide-controls":(0,t.__)("Hide Controls","tasty-recipes-lite")}},m=(0,e.useRef)(null),h=`tasty-recipes-recipe-${a}`,_=u&&o&&(o.includes("vimeo.com")||o.includes("youtube.com")||o.includes("youtu.be"));return(0,e.useEffect)(()=>{if(void 0===window.tinyMCE)return;const e=Object.assign({},window.tinyMCEPreInit.mceInit["tasty-recipes-editor"]);return e.selector=`#${h}`,e.statusbar=!0,e.setup=e=>{e.on("change",()=>{const t=e.getContent();d(t),r(t)})},window.tinyMCE.init(e),()=>{void 0!==window.tinyMCE&&window.tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,h)}},[h]),(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("label",{htmlFor:h,children:n}),(0,s.jsx)("textarea",{ref:m,id:h,name:a,className:"tasty-recipes-tinymce",defaultValue:o||"",onChange:e=>{d(e.target.value),r(e.target.value)}}),_&&(0,s.jsxs)("div",{className:"tasty-recipes-video-settings",children:[(0,s.jsx)("span",{children:(0,t.__)("Video Settings:","tasty-recipes-lite")}),Object.entries(u.settings).map(([e,t])=>(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",value:e,checked:c.includes(e),onChange:t=>((e,t)=>{const i=t?[...c,e]:c.filter(t=>t!==e);p(i)})(e,t.target.checked)}),t]},e)),(0,s.jsx)("input",{type:"hidden",name:`${a}_video_settings`,value:c.join(" ")})]})]})};var r=(0,e.forwardRef)(({icon:t,size:i=24,...a},s)=>(0,e.cloneElement)(t,{width:i,height:i,...a,ref:s})),o=i(942),d=i.n(o);const c=(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"18",fill:"none",children:(0,s.jsx)("path",{fill:"currentColor",d:"m10 9.527 3.819 3.818-1.274 1.274-1.645-1.646V18H9.1v-5.028l-1.645 1.647-1.274-1.274L10 9.527ZM10 0a6.3 6.3 0 0 1 6.258 5.575 4.95 4.95 0 0 1-.857 9.705v-1.812a3.149 3.149 0 1 0-1.001-6.22 4.5 4.5 0 1 0-8.8 0 3.15 3.15 0 1 0-1.162 6.193l.162.027v1.812a4.95 4.95 0 0 1-.859-9.705A6.3 6.3 0 0 1 10 0Z"})}),p=(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"m5.75 7.75.841 9.673a2 2 0 0 0 1.993 1.827h5.832a2 2 0 0 0 1.993-1.827l.841-9.673H5.75ZM9.75 10.75v5.5M13.25 10.75v5.5M8.75 7.75v-1a2 2 0 0 1 2-2h1.5a2 2 0 0 1 2 2v1M4.75 7.75h13.5"})}),u=({recipe:i,handleRecipeChange:a})=>{const[n,l]=(0,e.useState)(i?.image_sizes?.thumbnail);return(0,s.jsxs)("div",{className:d()({"tasty-recipes-image-placeholder":!n,"tasty-recipes-image":n}),children:[(0,s.jsx)("input",{type:"hidden",name:"image_id",value:i.image_id}),n?(0,s.jsx)(m,{recipeThumbnail:n,handleClickRemoveImage:()=>{a("image_id",0),l(null)}}):(0,s.jsx)(h,{handleClickSelectImage:e=>{e.preventDefault();const s=wp.media({title:(0,t.__)("Media Library","tasty-recipes-lite"),multiple:!1,library:{type:"image"},button:{text:(0,t.__)("Select Image","tasty-recipes-lite")}});s.on("open",()=>{const e=s.state().get("selection"),t=i.image_id;if(t){const i=wp.media.model.Attachment.get(t);i.fetch(),e.add(i)}}),s.on("select",()=>{const e=s.state().get("selection").toJSON();var t;e.length&&(a("image_id",e[0].id),l(null!==(t=e[0].sizes.thumbnail)&&void 0!==t?t:e[0].sizes.full))}),s.open()}})]})},m=({recipeThumbnail:e,handleClickRemoveImage:i})=>{return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"tasty-image-preview",children:[(0,s.jsx)("img",{"data-pin-nopin":"true",src:e.url,alt:"",width:"40px",height:"40px"}),(0,s.jsxs)("p",{children:[" ",(a=e.url,a.split("/").pop().replace(/-\d+x\d+(?=\.[a-zA-Z0-9]+$)/,""))," "]})]}),(0,s.jsxs)("button",{className:"tasty-secondary-button",onClick:i,children:[(0,s.jsx)(r,{icon:p,width:24}),(0,s.jsx)("span",{children:(0,t.__)("Remove Image","tasty-recipes-lite")})]})]});var a},h=({handleClickSelectImage:e})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r,{icon:c,width:20,height:18}),(0,s.jsx)("p",{className:"tasty-recipes-image-placeholder-title",children:(0,t.__)("Recipe Image","tasty-recipes-lite")}),(0,s.jsx)("p",{className:"tasty-recipes-image-placeholder-subtitle",children:(0,t.__)("Select an image file from your library.","tasty-recipes-lite")}),(0,s.jsx)("button",{className:"tasty-secondary-button",onClick:e,children:(0,t.__)("Select Image","tasty-recipes-lite")})]}),_=({initialRecipe:i,config:a})=>{const[r,o]=(0,e.useState)(i),d=a.attributes,c=(0,e.useMemo)(()=>{const e=d.nutrition;return Object.keys(e).filter(e=>"nutrifox_id"!==e).reduce((t,i)=>(t[i]=e[i],t),{})},[d.nutrition]),p=window.tastyRecipesEditorModalData.pluginURL+"/assets/images/nutrifox-logo.png",m=(e,t)=>o(i=>({...i,[e]:t}));return(0,s.jsxs)("form",{className:"tasty-framework",children:[(0,s.jsx)("input",{type:"hidden",name:"id",value:r.id}),(0,s.jsxs)("fieldset",{className:"tasty-recipes-modal-form-row",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",children:(0,t.__)("Title","tasty-recipes-lite")}),(0,s.jsx)("input",{type:"text",name:"title",id:"title",className:"regular-text",value:r.title||"",onChange:e=>m("title",e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"author_name",children:(0,t.__)("Author Name","tasty-recipes-lite")}),(0,s.jsx)("input",{type:"text",name:"author_name",id:"author_name",className:"regular-text",value:r.author_name||"",onChange:e=>m("author_name",e.target.value)})]})]}),(0,s.jsx)(u,{recipe:r,handleRecipeChange:m}),(0,s.jsx)(l,{name:"description",label:(0,t.__)("Description","tasty-recipes-lite"),initialValue:r.description,initialVideoSettingsValue:r.description_video_settings,onChange:e=>m("description",e)}),(0,s.jsx)(l,{name:"ingredients",label:(0,t.__)("Ingredients","tasty-recipes-lite"),initialValue:r.ingredients,initialVideoSettingsValue:r.ingredients_video_settings,onChange:e=>m("ingredients",e)}),(0,s.jsx)(l,{name:"instructions",label:(0,t.__)("Instructions","tasty-recipes-lite"),initialValue:r.instructions,initialVideoSettingsValue:r.instructions_video_settings,onChange:e=>m("instructions",e)}),(0,s.jsx)(l,{name:"notes",label:(0,t.__)("Notes","tasty-recipes-lite"),initialValue:r.notes,initialVideoSettingsValue:r.notes_video_settings,onChange:e=>m("notes",e)}),(0,s.jsx)(n,{className:"tasty-recipes-details",heading:(0,t.__)("Details","tasty-recipes-lite"),fields:d.cooking,initialFieldValues:r,onFieldChange:m,group:"details",recipe:r}),(0,s.jsx)(n,{className:"tasty-recipes-video-url",fields:{video_url:{label:(0,t.__)("Video URL","tasty-recipes-lite")}},initialFieldValues:r,onFieldChange:m,group:"video",recipe:r}),a.after_video_url_markup&&(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:a.after_video_url_markup}}),(0,s.jsx)(n,{className:"tasty-recipes-nutrition",group:"nutrition",heading:(0,t.__)("Nutrition","tasty-recipes-lite"),fields:c,initialFieldValues:r,onFieldChange:m,renderBeforeFields:()=>(0,s.jsxs)("fieldset",{className:"tasty-recipes-nutrifox-container",children:[(0,s.jsxs)("div",{className:"tasty-recipes-nutrifox-id-container",children:[(0,s.jsx)("label",{htmlFor:"tasty-recipes-recipe-nutrifox_id",children:d.nutrition.nutrifox_id.label}),(0,s.jsx)("input",{id:"tasty-recipes-recipe-nutrifox_id",type:"text",name:"nutrifox_id",className:"inline-field",value:r.nutrifox_id||"",onChange:e=>{m("nutrifox_id",e.target.value)}}),r.nutrifox_id&&(0,s.jsxs)("a",{className:"nutrifox-edit",href:`https://nutrifox.com/recipes/${parseInt(r.nutrifox_id)}/edit`,target:"_blank",rel:"noopener noreferrer",children:[(0,s.jsx)(g,{}),(0,t.__)("Edit recipe in Nutrifox","tasty-recipes-lite")]})]}),(0,s.jsx)("div",{className:"tasty-recipes-nutrifox-logo-container",children:(0,s.jsx)("a",{className:"nutrifox-logo",href:"https://nutrifox.com/?utm_source=tasty-recipes&utm_medium=dashboard&utm_campaign=recipe-editor",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)("img",{alt:"Nutrifox logo",src:p,width:"96",height:"22"})})})]}),recipe:r})]})},g=()=>(0,s.jsx)("svg",{"aria-hidden":"true",focusable:"false",style:{marginRight:"4px"},"data-prefix":"fas","data-icon":"external-link-alt",className:"svg-inline--fa fa-external-link-alt fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,s.jsx)("path",{fill:"currentColor",d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"})});let x;window.tastyRecipesMountRecipeEditor=(t,i)=>{x=(0,e.createRoot)(t),x.render((0,s.jsx)(_,{initialRecipe:i,config:window.tastyRecipesRecipeEditorData}))},window.tastyRecipesDestroyRecipeEditor=()=>{x&&(x.unmount(),x=null)}})()})();
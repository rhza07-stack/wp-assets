window.TastyFramework=window.TastyFramework||{},window.TastyFramework.ajax={send_post_request(e,t,a,s){let l=new XMLHttpRequest;l.open("POST",e,!0),l.send(this.prepare_post_data(t)),l.onreadystatechange=()=>{4===l.readyState&&(200===l.status?a(JSON.parse(l.responseText)):s(l))},l.onerror=()=>{s(l)}},prepare_post_data(e){var t,a=new FormData;for(t in e)a.append(t,e[t]);return a},send_get_request(e,t,a){let s=new XMLHttpRequest;s.open("GET",e,!0),s.send(null),s.onreadystatechange=()=>{4===s.readyState&&(200===s.status?t(JSON.parse(s.responseText)):a(s))},s.onerror=()=>{a(s)}}},window.TastyFramework=window.TastyFramework||{},window.TastyFramework.alerts={_msg_bag:{},_msg_bag_container_element:null,_default_duration:5,success(e,t,a){this.insert_msg({msg:e,duration:a,callback:t,type:"success"})},error(e,t,a){this.insert_msg({msg:e,duration:a,callback:t,type:"error"})},info(e,t,a){this.insert_msg({msg:e,duration:a,callback:t,type:"info"})},add(e,t,a,s){this.insert_msg({msg:t,duration:s,callback:a,type:e})},insert_msg(e){let t=Object.keys(this._msg_bag).length;this._msg_bag[t]=e,this._draw(),isNaN(e.duration)&&(e.duration=this._default_duration),e.duration<=0?e.callback&&e.callback(t):setTimeout(()=>{this.remove_msg(t)},1e3*e.duration)},remove_msg(e){this._msg_bag[e]&&(document.querySelector('[data-bagid="'+e+'"]').style.opacity=0,setTimeout(()=>{this._msg_bag[e].callback&&this._msg_bag[e].callback(e),delete this._msg_bag[e],this._draw()},1e3))},_draw(){if(this._msg_bag_container_element||(this._msg_bag_container_element=document.getElementById("tasty_framework_alerts_bag")),!(this._msg_bag_container_element.length<=0))for(var e in this._msg_bag_container_element.innerHTML="",this._msg_bag)this._draw_item(e,this._msg_bag[e])},_draw_item(e,t){let a=document.createElement("div");a.classList.add("tasty-msg"),a.classList.add("tasty-msg-"+t.type),a.dataset.bagid=e,a.innerHTML=t.msg,this._msg_bag_container_element.append(a),setTimeout(()=>{a.style.opacity=1},200)}},window.TastyFramework=window.TastyFramework||{},window.TastyFramework.f={getProBadge(){return`
			<span class="tasty-framework-pro-badge">
				<a href="" target="_blank" rel="noopener">
					Premium
				</a>
			</span>
		`}},window.TastyFramework=window.TastyFramework||{},window.TastyFramework.license={modal_element:null,modal_license_key_element:null,modal_license_plugin_element:null,modal_form_page_element:null,modal_success_page_element:null,modal_loader_element:null,global_loader_element:null,modal_download_btn_element:null,modal_activate_plugin_btn_element:null,options:{js_messagebox:[]},init(e){this.options=e,this.modal(),this.dashboard_rows(),this.showJSMessageBox()},_init_modal_elements(){this.modal_element=document.getElementById("tasty_framework_license_modal"),this.modal_license_key_element=document.getElementById("tasty_framework_modal_license_key"),this.modal_license_plugin_element=document.getElementById("tasty_framework_modal_license_plugin"),this.modal_activate_license_button=document.getElementById("tasty_framework_activate_license"),this.modal_form_page_element=document.getElementById("tasty_framework_license_modal_form_page"),this.modal_success_page_element=document.getElementById("tasty_framework_license_modal_success_page"),this.modal_loader_element=document.getElementById("tasty_framework_modal_loader"),this.modal_download_btn_element=document.getElementById("tasty_framework_download_plugin"),this.modal_activate_plugin_btn_element=document.getElementById("tasty_framework_activate_plugin")},_modal_loader_toggle(e){e?this.modal_loader_element.classList.add("tasty-open"):this.modal_loader_element.classList.remove("tasty-open")},_is_loading(){return this.modal_loader_element.classList.contains("tasty-open")},_modal_toggle(e){e?this.modal_element.classList.add("tasty-open"):(this.modal_element.classList.remove("tasty-open"),this._reset_modal())},modal(){if(this._init_modal_elements(),this.modal_license_key_element){var e=document.querySelector(".tasty-framework-licensing-header-add"),e=(e&&e.addEventListener("click",e=>{e.preventDefault(),this._modal_toggle(!0)}),document.querySelectorAll(".tasty-framework-close-modal, .tasty-framework-modal"));if(e&&0<e.length)for(let t of e)t.addEventListener("click",e=>{e.target===t&&(e.preventDefault(),this._modal_toggle(!1),"tasty_framework_modal_close_button"===e.target.getAttribute("id"))&&location.reload()});this.modal_license_key_element.addEventListener("keyup",e=>{32===e.target.value.length&&this._ajax_get_license_key_plugins()}),this.modal_activate_license_button.addEventListener("click",e=>{e.preventDefault(),this._ajax_activate_license()}),this.modal_download_btn_element.addEventListener("click",e=>{e.preventDefault(),this._ajax_download_plugin()}),this.modal_activate_plugin_btn_element.addEventListener("click",e=>{e.preventDefault(),this._ajax_download_plugin()})}},_init_dashboard_elements(){this.global_loader_element=document.querySelector(".tasty_framework_loader")},dashboard_rows(){this._init_dashboard_elements(),this._dashboard_rows_actions(),this._dynamic_ajax()},_loader_toggle(e){e?this.global_loader_element.classList.add("tasty-open"):this.global_loader_element.classList.remove("tasty-open")},_dashboard_rows_actions(){var e=document.querySelectorAll(".tasty-framework-licensing-row-actions-trigger");if(!(e.length<=0)){for(var t of e)t.addEventListener("click",e=>{e.preventDefault();var e=e.target.nextElementSibling,t=e.classList.contains("open");this._close_opened_dashboard_menus(),t||e.classList.add("open")});window.addEventListener("click",e=>{e.target.classList.contains("tasty-framework-licensing-row-actions-trigger")||this._close_opened_dashboard_menus()})}},_dynamic_ajax(){var e=document.querySelectorAll("a[data-tasty-ajax]");if(!(e.length<=0))for(var t of e)t.addEventListener("click",e=>{e.preventDefault(),this._send_dynamic_ajax(e.target.getAttribute("href"))})},_close_opened_dashboard_menus(){var e=document.querySelectorAll(".tasty-framework-licensing-row-actions-list.open");if(!(e.length<=0))for(var t of e)t.classList.remove("open")},_ajax_get_license_key_plugins(){var e;this._is_loading()||(this.modal_license_key_element.blur(),this._modal_loader_toggle(!0),this.modal_license_key_element.classList.remove("error"),this.modal_activate_license_button.classList.remove("tasty-button-disabled"),e={license_key:this.modal_license_key_element.value,action:"tasty_framework_license_key_plugins",_ajax_nonce:this.options.nonces.license_key_plugins},window.TastyFramework.ajax.send_post_request(window.ajaxurl,e,e=>{if(e.success)return this.modal_license_key_element.setAttribute("disabled",!0),this._fill_plugins_select_options(e.data),1!==Object.keys(e.data).length?void this._modal_loader_toggle(!1):void this.modal_activate_license_button.click();this.modal_license_key_element.classList.add("error"),window.TastyFramework.alerts.error(e.data.message),this._modal_loader_toggle(!1)},()=>{this._modal_loader_toggle(!1)}))},_ajax_activate_license(){this._modal_loader_toggle(!0);var e={license_key:this.modal_license_key_element.value,license_plugin_id:this.modal_license_plugin_element.value,license_plugin:this.modal_license_plugin_element.selectedOptions[0].text,action:"tasty_framework_activate_license",_ajax_nonce:this.options.nonces.activate_plugin_license};window.TastyFramework.ajax.send_post_request(window.ajaxurl,e,e=>{e.success?(this._show_classes_based_on_status(e.data.plugin_status),this.modal_success_page_element.classList.add("tasty-open"),this.modal_form_page_element.classList.add("tasty-hidden")):window.TastyFramework.alerts.error(e.data.message),this._modal_loader_toggle(!1)},()=>{this._modal_loader_toggle(!1)})},_show_classes_based_on_status(e){this._reset_all_status_classes();e=document.querySelectorAll(".tasty-framework-modal-for-"+e);if(e)for(var t of e)t.classList.remove("tasty-hidden")},_reset_all_status_classes(){var e=document.querySelectorAll('[class*="tasty-framework-modal-for-"]');if(e)for(var t of e)t.classList.contains("tasty-hidden")||t.classList.add("tasty-hidden")},_ajax_download_plugin(){var e;this._modal_loader_toggle(!0),this.modal_license_key_element.value&&this.modal_license_plugin_element.value&&(e={license_key:this.modal_license_key_element.value,license_plugin_id:this.modal_license_plugin_element.value,license_plugin:this.modal_license_plugin_element.selectedOptions[0].text,action:"tasty_framework_download_plugin",_ajax_nonce:this.options.nonces.download_plugin},window.TastyFramework.ajax.send_post_request(window.ajaxurl,e,e=>{e.success?(this._modal_toggle(!1),location.reload()):window.TastyFramework.alerts.error(e.data.message),this._modal_loader_toggle(!1)},()=>{this._modal_loader_toggle(!1)}))},_fill_plugins_select_options(e){for(var t in this.modal_license_plugin_element.innerHTML="",e){var a=document.createElement("option");a.value=t,a.innerHTML=e[t],this.modal_license_plugin_element.append(a)}},_send_dynamic_ajax(e){this._loader_toggle(!0),window.TastyFramework.ajax.send_get_request(e,e=>{e.data&&e.data.redirect?window.location=e.data.redirect:e.success?location.reload():(this._loader_toggle(!1),window.TastyFramework.alerts.error(e.data.message))},()=>{this._loader_toggle(!1)})},_reset_modal(){this.modal_license_key_element.length<=0||(this.modal_license_key_element.removeAttribute("disabled"),this.modal_license_key_element.value="",this._fill_plugins_select_options([this.modal_license_plugin_element.dataset.default]),this._modal_loader_toggle(!1),this.modal_download_btn_element.classList.remove("tasty-hidden"),this.modal_download_btn_element.innerHTML=this.modal_download_btn_element.dataset.defaultText,this.modal_success_page_element.classList.remove("tasty-open"),this.modal_form_page_element.classList.remove("tasty-hidden"),this._reset_all_status_classes())},showJSMessageBox(){if(this.options.js_messagebox)for(var e of this.options.js_messagebox)window.TastyFramework.alerts.add(e.type,e.message)}},(e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)})(()=>{window.TastyFramework.license.init(window.tasty_backend)});